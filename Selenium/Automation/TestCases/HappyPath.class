package com.saucedemo.TestCases;//Test case no. 2
//Logowanie za pomoca poprawnych danych
//Dodanie trzech przedmiotow do koszyka
//Przejscie do koszyka

import com.saucedemo.Pages.BasketPage;
import com.saucedemo.Pages.CheckoutStepOnePage;
import com.saucedemo.Pages.InventoryPage;
import com.saucedemo.Pages.LoginPage;
import io.github.bonigarcia.wdm.WebDriverManager;
import org.junit.Assert;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

public class HappyPath {
    public static WebDriver driver;
    public static void main(String[] args) {
        WebDriverManager.chromedriver().setup();
        driver = new ChromeDriver();

        driver.manage().window().maximize();
        driver.get("https://www.saucedemo.com/index.html");

        LoginPage login = new LoginPage(driver);
        login.loginToWebsite();

        InventoryPage inventory = new InventoryPage(driver);
        inventory.addToBasket();
        inventory.goToBasket();

        BasketPage basket = new BasketPage(driver);
        basket.clickDeleteFirst();
        basket.clickCheckoutButton();

        CheckoutStepOnePage checkoutOne = new CheckoutStepOnePage(driver);
        checkoutOne.setFirstName();
        checkoutOne.setLastName();
        checkoutOne.setPostalCode();
        checkoutOne.clickContinue();

//        String cashText = driver.findElement(By.xpath("//*[@id=\"checkout_summary_container\"]/div/div[2]/div[5]")).getText();
//        System.out.println(cashText);
//        String cashT = cashText.replace("Item total: $","");
//        System.out.println(cashT);
//        double price = Double.parseDouble(cashT);
//        System.out.println(price);

        driver.findElement(By.xpath("//*[@id=\"checkout_summary_container\"]/div/div[2]/div[8]/a[2]")).click();

        String websiteAdress = driver.getCurrentUrl();
        Assert.assertEquals("https://www.saucedemo.com/checkout-complete", websiteAdress);
        driver.close();
    }
}
